1.redis数据超时处理
2.使用spring + quartz定时任务（支持任务信息写入mysql,多节点分布式执行任务），下单成功后，生成一个30分钟后运行的任务，30分钟后检查订单状态，如果未支付，则进行处理
3.xxljob写入数据库轮询


以下是三种不同方法（内存维护、数据库存储、消息队列）的优缺点对比表：

| 方法    | 优点                                              | 缺点                                                         |
| ----- | ----------------------------------------------- | ---------------------------------------------------------- |
| 内存维护  | - 实现简单<br>- 响应速度快<br>                           | - 任务数量受限于内存大小<br>- 任务状态不持久化，应用重启后丢失<br>- 不适合高并发场景          |
| 数据库存储 | - 任务状态持久化，应用重启后仍可用<br>- 支持大量任务<br>- 易于查询和管理任务状态 | - 需要额外的数据库资源<br>- 性能受数据库读写速度影响<br>- 复杂度增加，需要处理数据库连接和事务     |
| 消息队列  | - 可靠性高，支持分布式部署<br>- 支持高并发和大规模任务<br>- 解耦生产者和消费者  | - 需要额外的消息队列服务（如 RabbitMQ、Kafka）<br>- 配置和管理相对复杂<br>- 学习曲线较陡 |

